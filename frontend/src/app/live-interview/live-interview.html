<div class="interview-container">
<!--    &lt;!&ndash; Debug Info (–º–æ–∂–µ –¥–∞ –∫–æ–º–µ–Ω—Ç–∏—Ä–∞—Ç–µ –∑–∞ production) &ndash;&gt;-->
<!--    <div class="debug-info">-->
<!--        <div>Role: {{role}}</div>-->
<!--        <div>Local Tracks: {{debugInfo.localTracks}}</div>-->
<!--        <div>Remote Tracks: {{debugInfo.remoteTracks}}</div>-->
<!--        <div>Connection: {{debugInfo.connectionState}}</div>-->
<!--        <div>ICE: {{debugInfo.iceConnectionState}}</div>-->
<!--        <div>View: {{showCodeEditor ? 'Code' : (showNotes ? 'Notes' : 'Video')}}</div>-->

<!--        <button (click)="showDebugInfo()">Log State</button>-->

<!--        &lt;!&ndash; View control buttons in debug panel &ndash;&gt;-->
<!--        <div style="margin-top: 5px; display: flex; flex-direction: column; gap: 2px;">-->
<!--            <button (click)="toggleCodeEditor()"-->
<!--                    [style.background-color]="showCodeEditor ? '#3b82f6' : 'transparent'">-->
<!--                üíª Code-->
<!--            </button>-->
<!--            <button *ngIf="isHost"-->
<!--                    (click)="toggleNotes()"-->
<!--                    [style.background-color]="showNotes ? '#3b82f6' : 'transparent'">-->
<!--                üìù Notes-->
<!--            </button>-->
<!--        </div>-->
<!--    </div>-->

    <!-- Main Content with Toggle -->
    <div class="main-content" [class.split-view]="showCodeEditor || showNotes">

        <!-- Video Section (your working code) -->
        <div class="video-section" [class.collapsed]="showCodeEditor || showNotes">
            <div class="video-wrapper">
                <div class="videos">
                    <!-- HOST VIEW -->
                    <ng-container *ngIf="role === 'host'; else guestTemplate">
                        <div class="my-cam-warper">
                            <video #localVideo autoplay muted playsinline></video>
                            <div class="participant-name">{{ candidateName }} (–í–∏–µ)</div>
                            <div class="status-indicator">
                                üü¢ –û–Ω–ª–∞–π–Ω
                                <span *ngIf="!micEnabled">üîá –ë–µ–∑ –∑–≤—É–∫</span>
                            </div>
                            <div class="controls">
                                <button (click)="toggleMic()">
                                    <i class="fas" [ngClass]="micEnabled ? 'fa-microphone' : 'fa-microphone-slash'"></i>
                                </button>
                                <button (click)="toggleCamera()">
                                    <i class="fas" [ngClass]="cameraEnabled ? 'fa-video' : 'fa-video-slash'"></i>
                                </button>
                            </div>
                        </div>

                        <div class="remote-cam">
                            <video #remoteVideo autoplay playsinline></video>
                            <div class="participant-name">–°—ä–±–µ—Å–µ–¥–Ω–∏–∫</div>
                            <div class="status-indicator">üü¢ –û–Ω–ª–∞–π–Ω</div>
                        </div>
                    </ng-container>

                    <!-- GUEST VIEW -->
                    <ng-template #guestTemplate>
                        <div class="remote-cam">
                            <video #remoteVideo autoplay playsinline></video>
                            <div class="participant-name">–ò–Ω—Ç–µ—Ä–≤—é–∏—Ä–∞—â</div>
                            <div class="status-indicator">üü¢ –û–Ω–ª–∞–π–Ω</div>
                        </div>

                        <div class="my-cam-warper">
                            <video #localVideo autoplay muted playsinline></video>
                            <div class="participant-name">{{ candidateName }} (–í–∏–µ)</div>
                            <div class="status-indicator">
                                üü¢ –û–Ω–ª–∞–π–Ω
                                <span *ngIf="!micEnabled">üîá –ë–µ–∑ –∑–≤—É–∫</span>
                            </div>
                            <div class="controls">
                                <button (click)="toggleMic()">
                                    <i class="fas" [ngClass]="micEnabled ? 'fa-microphone' : 'fa-microphone-slash'"></i>
                                </button>
                                <button (click)="toggleCamera()">
                                    <i class="fas" [ngClass]="cameraEnabled ? 'fa-video' : 'fa-video-slash'"></i>
                                </button>
                            </div>
                        </div>
                    </ng-template>
                </div>

                <!-- Control buttons - –û–ë–ù–û–í–ï–ù–ò —Å Notes –ø–æ–¥–¥—Ä—ä–∂–∫–∞ -->
                <div class="interview-controls">

                    <!-- Code Editor toggle –±—É—Ç–æ–Ω -->
                    <button (click)="toggleCodeEditor()"
                            [class.active]="showCodeEditor"
                            class="control-btn code-btn">
                        üíª {{showCodeEditor ? 'Hide Code Editor' : 'Show Code Editor'}}
                    </button>

                    <!-- Notes toggle –±—É—Ç–æ–Ω - –ù–û–í–û! –°–∞–º–æ –∑–∞ host -->
                    <button *ngIf="isHost"
                            (click)="toggleNotes()"
                            [class.active]="showNotes"
                            class="control-btn notes-btn">
                        üìù {{showNotes ? 'Hide Notes' : 'Show Notes'}}
                    </button>

                    <!-- Leave call –±—É—Ç–æ–Ω -->
                    <button (click)="leaveCall()" class="control-btn leave-btn">
                        ‚õî –ù–∞–ø—É—Å–Ω–∏ —Å—Ä–µ—â–∞—Ç–∞
                    </button>
                </div>
            </div>
        </div>

        <!-- Code Editor Section - –ø–æ–∫–∞–∑–≤–∞ —Å–µ —Å–∞–º–æ –ø—Ä–∏ showCodeEditor -->
        <div class="code-editor-section" *ngIf="showCodeEditor">
            <app-shared-code-editor
                [roomId]="roomId"
                [userId]="currentUserId"
                [userName]="candidateName"
                [isHost]="isHost">
            </app-shared-code-editor>
        </div>

        <!-- Interview Notes Section - –ö–õ–Æ–ß–û–í–û: –∏–∑–ø–æ–ª–∑–≤–∞–º–µ [hidden] –≤–º–µ—Å—Ç–æ *ngIf -->
        <!-- –¢–æ–≤–∞ –∑–∞–ø–∞–∑–≤–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤ DOM-–∞, –Ω–æ –≥–æ —Å–∫—Ä–∏–≤–∞ –≤–∏–∑—É–∞–ª–Ω–æ -->
        <div class="notes-section"
             [hidden]="!showNotes"
             [class.visible]="showNotes">

            <!-- –°—ä–∑–¥–∞–≤–∞–º–µ notes –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å–∞–º–æ –∞–∫–æ –µ host –ò –µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–Ω -->
            <app-interview-notes
                *ngIf="isHost && notesInitialized"
                [roomId]="roomId"
                [candidateName]="candidateName"
                [isHost]="isHost"
                [interviewerId]="interviewerId">
            </app-interview-notes>

            <!-- Loading state –∑–∞ –ø—ä—Ä–≤–æ—Ç–æ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ -->
            <div *ngIf="isHost && showNotes && !notesInitialized"
                 class="notes-loading">
                üìù –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –±–µ–ª–µ–∂–∫–∏...
            </div>
        </div>

    </div>
</div>
