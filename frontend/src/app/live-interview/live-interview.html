<div class="interview-container">
    <!-- Debug Info (optional) -->
    <!--    <div class="debug-info" style="position: fixed; top: 10px; right: 10px; background: rgba(0,0,0,0.8); color: white; padding: 10px; font-size: 12px; z-index: 1000;">-->
    <!--        <div>Role: {{role}}</div>-->
    <!--        <div>Local Tracks: {{debugInfo.localTracks}}</div>-->
    <!--        <div>Remote Tracks: {{debugInfo.remoteTracks}}</div>-->
    <!--        <div>Connection: {{debugInfo.connectionState}}</div>-->
    <!--        <div>ICE: {{debugInfo.iceConnectionState}}</div>-->
    <!--        <button (click)="showDebugInfo()">Log State</button>-->
    <!--        <button *ngIf="showUnmuteCTA" class="unmute-cta" (click)="unmuteRemote()">Tap to unmute üîä</button>-->
    <!--    </div>-->

    <!-- Main Content with Toggle -->
    <div class="main-content" [class.split-view]="showCodeEditor">


        <!-- Video Section (your working code) -->
        <div class="video-section" [class.collapsed]="showCodeEditor">
            <div class="video-wrapper">
                <div class="videos">
                    <!-- HOST VIEW -->
                    <ng-container *ngIf="role === 'host'; else guestTemplate">
                        <div class="my-cam-warper">
                            <video #localVideo autoplay muted playsinline></video>
                            <div class="participant-name">{{ candidateName }} (–í–∏–µ)</div>
                            <div class="status-indicator">
                                üü¢ –û–Ω–ª–∞–π–Ω
                                <span *ngIf="!micEnabled">üîá –ë–µ–∑ –∑–≤—É–∫</span>
                            </div>
                            <div class="controls">
                                <button (click)="toggleMic()">
                                    <i class="fas" [ngClass]="micEnabled ? 'fa-microphone' : 'fa-microphone-slash'"></i>
                                </button>
                                <button (click)="toggleCamera()">
                                    <i class="fas" [ngClass]="cameraEnabled ? 'fa-video' : 'fa-video-slash'"></i>
                                </button>
                            </div>
                        </div>

                        <div class="remote-cam">
                            <video #remoteVideo autoplay playsinline></video>
                            <div class="participant-name">–°—ä–±–µ—Å–µ–¥–Ω–∏–∫</div>
                            <div class="status-indicator">üü¢ –û–Ω–ª–∞–π–Ω</div>
                        </div>
                    </ng-container>

                    <!-- GUEST VIEW -->
                    <ng-template #guestTemplate>
                        <div class="remote-cam">
                            <video #remoteVideo autoplay playsinline></video>
                            <div class="participant-name">–ò–Ω—Ç–µ—Ä–≤—é–∏—Ä–∞—â</div>
                            <div class="status-indicator">üü¢ –û–Ω–ª–∞–π–Ω</div>
                        </div>

                        <div class="my-cam-warper">
                            <video #localVideo autoplay muted playsinline></video>
                            <div class="participant-name">{{ candidateName }} (–í–∏–µ)</div>
                            <div class="status-indicator">
                                üü¢ –û–Ω–ª–∞–π–Ω
                                <span *ngIf="!micEnabled">üîá –ë–µ–∑ –∑–≤—É–∫</span>
                            </div>
                            <div class="controls">
                                <button (click)="toggleMic()">
                                    <i class="fas" [ngClass]="micEnabled ? 'fa-microphone' : 'fa-microphone-slash'"></i>
                                </button>
                                <button (click)="toggleCamera()">
                                    <i class="fas" [ngClass]="cameraEnabled ? 'fa-video' : 'fa-video-slash'"></i>
                                </button>
                            </div>
                        </div>
                    </ng-template>
                </div>

                <!-- Control buttons -->
                <div class="interview-controls">
                    <button (click)="toggleCodeEditor()" class="toggle-editor-btn">
                        {{ showCodeEditor ? 'üìπ Show Video Only' : 'üíª Show Code Editor' }}
                    </button>

                    <button (click)="leaveCall()" class="leave-call-btn">
                        ‚õî –ù–∞–ø—É—Å–Ω–∏ —Å—Ä–µ—â–∞—Ç–∞
                    </button>
                </div>
            </div>
        </div>

        <!-- Code Editor Section -->
        <div class="code-editor-section" *ngIf="showCodeEditor">
            <app-shared-code-editor
                [roomId]="roomId"
                [userId]="currentUserId"
                [userName]="candidateName"
                [isHost]="isHost">
            </app-shared-code-editor>
        </div>

    </div>
</div>
